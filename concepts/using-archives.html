<!doctype html>
<html lang="en">
<head>

	<meta charset="utf-8">
	<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<title>Archives - Documentation | CouchCMS - A simple and Open-Source CMS for web designers</title>
	<meta name="description" content="CouchCMS - A simple, light-weight and open-source CMS for web designers">
	<meta name="keywords" content="">
	<link rel="shortcut icon" href="../assets/img/favicon.ico">
	<link rel="apple-touch-icon" href="../assets/img/apple-touch-icon.jpg">
	<link rel="apple-touch-icon" sizes="72x72" href="../assets/img/apple-touch-icon-72x72.jpg">
	<link rel="apple-touch-icon" sizes="114x114" href="../assets/img/apple-touch-icon-114x114.jpg">
    <link rel="stylesheet" type="text/css" href="../assets/css/custom-animations.css" />
	<link rel="stylesheet" type="text/css" href="../assets/css/lib/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="../assets/css/style.css" />


    <link rel="stylesheet" type="text/css" href="../assets/css/docs-style.css" />

	<!--[if lt IE 9]>
		<script src="../assets/js/html5shiv.js"></script>
		<script src="../assets/js/respond.min.js"></script>
	<![endif]-->
</head>

<body>
	<!-- Header -->
	<header>
		<nav class="navigation navigation-header relative-header background-header">
			<div class="container">
				<div class="navigation-brand">
					<div class="brand-logo">
						<a href="https://www.couchcms.com/" class="logo"></a><a href="https://www.couchcms.com/" class="logo logo-alt"></a>
					</div>
				</div>
				<button class="navigation-toggle">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<div class="navigation-navbar collapsed">
					<ul class="navigation-bar navigation-bar-left">
						<li><a href="https://www.couchcms.com/">Home</a></li>
                        <li><a href="https://www.couchcms.com/products/">Downloads & License</a></li>
                        <li class="active"><a href="http://docs.couchcms.com/">Documentation</a></li>
						<li><a href="https://www.couchcms.com/forum/">Forum</a></li>
                        <li><a href="https://www.couchcms.com/contact/">Contact Us</a></li>
					</ul>
					<ul class="navigation-bar navigation-bar-right">
						<li class="featured"><a class="btn btn-sm btn-outline-color" href="https://github.com/CouchCMS/CouchCMS">GitHub Repository</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>

	<section class="section dark-text" >
		<div class="container">
        <!-- start -->
        <a class="report-bug" data-title="Archives" href="https://github.com/CouchCMS/Documentation/issues/new" target="_blank" title="Is there a mistake on this page? Report the issue!"><img alt="" src="../assets/img/bug.png"/></a>

        <div id="content"><ul class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
                    <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="../index.html" itemprop="item"><span itemprop="name">Documentation</span><meta content="1" itemprop="position"/></a></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="../concepts.html" itemprop="item"><span itemprop="name">Core Concepts</span><meta content="2" itemprop="position"/></a></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="text-link" href="../concepts/using-archives.html" itemprop="item"><span itemprop="name">Archives</span><meta content="3" itemprop="position"/></a></li>
                </ul><article><h1 id="archives">Archives</h1>
<p>For some types of templates, like <em>blog</em> and <em>news</em>, it is useful to archive the cloned pages by certain time periods e.g. group together pages by years, months or days.<br/>
<a href="../tags-reference/archives.html"><strong><em>Archives</em></strong></a> tag is used to find out all the past time periods (years, months and days) during which atleast one page has been published.</p>
<p>The following snippet will simply list all the monthly periods that contain alleast one published page -</p>
<pre><code>&lt;cms:archives masterpage=&#39;blog.php&#39;&gt;
    &lt;cms:date k_archive_date format=&#39;F Y&#39; /&gt;&lt;br&gt;
&lt;/cms:archives&gt;
</code></pre><p class="notice">
    The <em>k_archive_date</em> variable is set in a machine readable format.<br/>
    The <a href="../tags-reference/date.html"><strong><em>date</em></strong></a> tag converts it into a displayable format.
</p>

<p>By default the archives tag will group together pages by month. You can set the <em>type</em> parameter to either <em>yearly</em>, <em>monthly</em> or <em>daily</em> to specify the desired grouping. For example, the following snippet will create yearly archives of pages -</p>
<pre><code>&lt;cms:archives masterpage=&#39;blog.php&#39; type=&#39;yearly&#39;&gt;
    &lt;cms:date k_archive_date format=&#39;F Y&#39; /&gt;&lt;br&gt;
&lt;/cms:archives&gt;
</code></pre><h3 id="variables-set-by-archives-tag">Variables set by archives tag</h3>
<p>The following variables are set for each time period as it is iterated -</p>
<h4 id="k_archive_date">k_archive_date</h4>
<p>Denotes the beginning of the time period.</p>
<h4 id="k_next_archive_date">k_next_archive_date</h4>
<p>Denotes the end of the time period.</p>
<h4 id="k_archive_link">k_archive_link</h4>
<p>Link to the <em>archive-view</em> of the template.<br/>
A listing of all pages that belong to this period can be done here (see below).</p>
<h4 id="k_archive_count">k_archive_count</h4>
<p>The number of published pages in this period.</p>
<h4 id="k_count">k_count</h4>
<p>Count of the current iteration.<br/>
Starts by default from &#39;1&#39; but this can be modified by the <em>startcount</em> parameter.</p>
<p>Using the variables that get set for each time period, the following snippet could be used to create a side-bar menu that lists the latest 6 available monthly archives along with the count of pages in each period. Each entry is also hyperlinked to it&#39;s <em>archive-view</em> page that should list all the contained pages.</p>
<pre><code>&lt;ul&gt;
&lt;cms:archives limit=&#39;6&#39;&gt;
    &lt;li&gt;
    &lt;a href=&quot;&lt;cms:show k_archive_link/&gt;&quot;&gt;&lt;cms:date k_archive_date format=&#39;F Y&#39; /&gt;&lt;/a&gt;
    (&lt;cms:show k_archive_count /&gt;)
    &lt;/li&gt;
&lt;/cms:archives&gt;
&lt;/ul&gt;
</code></pre><p>The <a href="../tags-reference/archives.html"><strong><em>archives</em></strong></a> tag is only the first step in arranging your pages in archives as it merely delineates the archive periods for us.<br/>
To list the pages belonging to any of these periods, we&#39;ll have to use the <a href="../tags-reference/pages.html"><strong><em>pages</em></strong></a> tag which we have already discussed.</p>
<p>If you recall the <a href="../tags-reference/pages.html"><strong><em>pages</em></strong></a> tag, pages belonging to a particular time period can be easily fetched by setting the <em>start_on</em> and <em>stop_before</em> parameters.<br/>
If we set these two parameters to the start and the end of an archive time period, a list of pages that were published during that period can be created.<br/>
We can use the <em>k_archive_date</em> and <em>k_next_archive_date</em> variables set at each iteration of the archives tag to do so.</p>
<pre><code>&lt;ul&gt;
&lt;cms:archives masterpage=&#39;property.php&#39;&gt;
    &lt;li&gt;
    &lt;b&gt;&lt;cms:date k_archive_date format=&#39;F Y&#39; /&gt;&lt;/b&gt; (&lt;cms:show k_archive_count /&gt;)
    &lt;ul&gt;
    &lt;cms:pages masterpage=&#39;property.php&#39; start_on=k_archive_date stop_before=k_next_archive_date&gt;
        &lt;li&gt;
        &lt;a href=&quot;&lt;cms:show k_page_link /&gt;&quot;&gt;&lt;cms:show k_page_title /&gt;&lt;/a&gt;
        &lt;i&gt;&lt;cms:date k_page_date /&gt;&lt;/i&gt;
        &lt;/li&gt;
    &lt;/cms:pages&gt;
    &lt;/ul&gt;
    &lt;/li&gt;
&lt;/cms:archives&gt;
&lt;/ul&gt;
</code></pre><p>The snippet given above is great for listing out on one single page all the monthly archive periods along with the pages belonging to them (like in a site-map).</p>
<p>You can also create separate pages for each archive period.<br/>
In fact, Couch already does this for you.<br/>
You might recall that Couch supports a view of any clonable template that is dedicated to listing out pages belonging to a time period - the <em>archive-view</em>.<br/>
The <em>k_archive_link</em> variable set by the archives tag points to this view for each time period.<br/>
Thus for a monthly period of July, 2010, the link of the <em>archive-view</em> of <em>blog.php</em> could be -<br/>
<em>http&#58;//www.yoursite.com/blog/2010/07/</em></p>
<p>For an yearly period of 2010, the same link would be -<br/>
<em>http&#58;//www.yoursite.com/blog/2010/</em></p>
<p>While for a daily period, the link would be -<br/>
<em>http&#58;//www.yoursite.com/blog/2010/07/31/</em></p>
<p>By pointing your browser to these urls, you&#39;ll be accessing your <em>blog.php</em> template in <em>archive-view</em> (see: <a href="views.html"><strong>Views</strong></a>).<br/>
In this view, apart from other variables that you normally find set, Couch sets the <em>k_archive_date</em> and <em>k_next_archive_date</em> variables (see: <a href="variables-in-views.html"><strong>Variables available in Views</strong></a>).<br/>
It shouldn&#39;t be difficult to set up the <a href="../tags-reference/pages.html"><strong><em>pages</em></strong></a> tag to list pages belonging the archive period by using these variables (see: <a href="listing-pages.html"><strong>Listing Pages</strong></a>).</p>
</article>
        </div>
        <!-- end -->
		</div>
	</section>

    <section>&nbsp;</section>

	<footer id="footer" class="footer light-text">
		<div class="container">
			<div class="footer-content row">
				<div class="col-sm-12 social-wrap col-xs-12">
					<strong class="heading">Follow us on Twitter</strong>
					<ul class="list-inline socials">
						<li><a href="https://twitter.com/CouchCMS"><span class="icon icon-socialmedia-07"></span></a></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="copyright">&copy; 2010-2017 Webzyme Softwares Pvt. Ltd. All Rights Reserved</div>
	</footer>

	<div class="back-to-top"><i class="fa fa-angle-up fa-3x"></i></div>

	<!--[if lt IE 9]>
		<script type="text/javascript" src="../assets/js/jquery-1.11.3.min.js?ver=1"></script>
	<![endif]-->
	<!--[if (gte IE 9) | (!IE)]><!-->
		<script type="text/javascript" src="../assets/js/jquery-2.1.4.min.js?ver=1"></script>
	<!--<![endif]-->

	<script type="text/javascript" src="../assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../assets/js/startuply.js"></script>
    <script type="text/javascript" src="../assets/js/ga.js"></script>
</body>
</html>
