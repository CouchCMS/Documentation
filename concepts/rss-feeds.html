<!doctype html>
<html lang="en">
<head>

	<meta charset="utf-8">
	<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<title>RSS Feeds - Documentation | CouchCMS - A simple and Open-Source CMS for web designers</title>
	<meta name="description" content="CouchCMS - A simple, light-weight and open-source CMS for web designers">
	<meta name="keywords" content="">
	<link rel="shortcut icon" href="../assets/img/favicon.ico">
	<link rel="apple-touch-icon" href="../assets/img/apple-touch-icon.jpg">
	<link rel="apple-touch-icon" sizes="72x72" href="../assets/img/apple-touch-icon-72x72.jpg">
	<link rel="apple-touch-icon" sizes="114x114" href="../assets/img/apple-touch-icon-114x114.jpg">
    <link rel="stylesheet" type="text/css" href="../assets/css/custom-animations.css" />
	<link rel="stylesheet" type="text/css" href="../assets/css/lib/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="../assets/css/style.css" />


    <link rel="stylesheet" type="text/css" href="../assets/css/docs-style.css" />

	<!--[if lt IE 9]>
		<script src="../assets/js/html5shiv.js"></script>
		<script src="../assets/js/respond.min.js"></script>
	<![endif]-->
</head>

<body>
	<!-- Header -->
	<header>
		<nav class="navigation navigation-header relative-header background-header">
			<div class="container">
				<div class="navigation-brand">
					<div class="brand-logo">
						<a href="https://www.couchcms.com/" class="logo"></a><a href="https://www.couchcms.com/" class="logo logo-alt"></a>
					</div>
				</div>
				<button class="navigation-toggle">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<div class="navigation-navbar collapsed">
					<ul class="navigation-bar navigation-bar-left">
						<li><a href="https://www.couchcms.com/">Home</a></li>
                        <li><a href="https://www.couchcms.com/products/">Downloads & License</a></li>
                        <li class="active"><a href="http://docs.couchcms.com/">Documentation</a></li>
						<li><a href="https://www.couchcms.com/forum/">Forum</a></li>
                        <li><a href="https://www.couchcms.com/contact/">Contact Us</a></li>
					</ul>
					<ul class="navigation-bar navigation-bar-right">
						<li class="featured"><a class="btn btn-sm btn-outline-color" href="https://github.com/CouchCMS/CouchCMS">GitHub Repository</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>

	<section class="section dark-text" >
		<div class="container">
        <!-- start -->
        <a class="report-bug" data-title="RSS Feeds" href="https://github.com/CouchCMS/Documentation/issues/new" target="_blank" title="Is there a mistake on this page? Report the issue!"><img alt="" src="../assets/img/bug.png"/></a>

        <div id="content"><ul class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
                    <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="../index.html" itemprop="item"><span itemprop="name">Documentation</span><meta content="1" itemprop="position"/></a></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="../concepts.html" itemprop="item"><span itemprop="name">Core Concepts</span><meta content="2" itemprop="position"/></a></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="text-link" href="../concepts/rss-feeds.html" itemprop="item"><span itemprop="name">RSS Feeds</span><meta content="3" itemprop="position"/></a></li>
                </ul><article><h1 id="rss-feeds">RSS Feeds</h1>
<p>Let us first see how a RSS feed is created manually (i.e. without using Couch or any other CMS) and then we&#39;ll see how to automate the task by retrofitting Couch into it.</p>
<p>For our example, we&#39;ll suppose you publish news items on your website and wish to offer these news items as a RSS feed.<br/>
Place the following snippet within a plain text file and name it, say, <em>rss.xml</em> (make sure there is no space between the beginning of the file and the <em>&lt;?xml version=&quot;1.0&quot;?&gt;</em> statement).</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;rss version=&quot;2.0&quot;&gt;
    &lt;channel&gt;
        &lt;title&gt;My Explosive News&lt;/title&gt;
        &lt;link&gt;http://www.mysite.com&lt;/link&gt;
        &lt;description&gt;News and articles written by me&lt;/description&gt;
        &lt;language&gt;en-us&lt;/language&gt;
        &lt;pubDate&gt;Fri, 30 Jul 2010 05:49:44 GMT&lt;/pubDate&gt;
    &lt;/channel&gt;
&lt;/rss&gt;
</code></pre><p>In the snippet above, we are declaring one RSS channel that will carry your news items. You&#39;ll need to modify the title, link and description tags to match your channel.</p>
<p>Now add the individual news items to this channel -</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;rss version=&quot;2.0&quot;&gt;
    &lt;channel&gt;
        &lt;title&gt;My Explosive News&lt;/title&gt;
        &lt;link&gt;http://www.mysite.com&lt;/link&gt;
        &lt;description&gt;News and articles written by me&lt;/description&gt;
        &lt;language&gt;en-us&lt;/language&gt;
        &lt;pubDate&gt;10 Jul 2007&lt;/pubDate&gt;

        &lt;item&gt;
            &lt;title&gt;My Second News&lt;/title&gt;
            &lt;link&gt;http://www.mysite.com/breaking/my-second-news.html&lt;/link&gt;
            &lt;description&gt;This is my second news item.&lt;/description&gt;
            &lt;pubDate&gt;10 Jul 2007&lt;/pubDate&gt;
        &lt;/item&gt;

        &lt;item&gt;
            &lt;title&gt;My First News&lt;/title&gt;
            &lt;link&gt;http://www.mysite.com/my-first-news.html&lt;/link&gt;
            &lt;description&gt;This is my first news item.&lt;/description&gt;
            &lt;pubDate&gt;10 Jul 2007&lt;/pubDate&gt;
        &lt;/item&gt;
    &lt;/channel&gt;
&lt;/rss&gt;
</code></pre><p>We have added two recent news items that were published.<br/>
Try visiting this <em>rss.xml</em> page in your browser or a news aggregator and the feed should come up without a hitch.</p>
<p>RSS (Really Simple Syndication) seems to be really simple after all.<br/>
However, manually adding every new news item published to the feed will be a painful chore.<br/>
We&#39;ll now retrofit Couch into this feed to publish news items automatically.</p>
<p>We&#39;ll suppose that the news items are cloned pages of a <em>news.php</em> template in Couch.<br/>
Rename the <em>rss.xml</em> file to <em>rss.php</em> and add the usual PHP code that hooks Couch into this template.</p>
<p>This conversion of the xml file to a php file is essential for Couch but it will raise two problems that we&#39;ll need to solve before going ahead -</p>
<ol>
<li>The &#39;&lt;?&#39; and &#39;?&gt; in the line &lt;?xml version=&quot;1.0&quot;?&gt; will cause PHP to throw a parsing error because those characters mislead PHP into believing that the line is a php statement, which it is not.</li>
<li>The web server always sends back to the browser the mime-type of any file that it is serving to fulfill the browser&#39;s request. The mime-type of an XML file should be <em>text/xml</em> but the new &#39;.php&#39; extension causes the web server to send back the default <em>text/html</em> mime-type, which will be rejected by the browser.</li>
</ol>
<p>The first problem can be rectified by breaking up the XML statement in a way that it does not confuse PHP.<br/>
The following snippet using Couch&#39;s <a href="../tags-reference/concat.html"><strong><em>concat</em></strong></a> tag will output exactly the same statement but because the &#39;&lt;?&#39; characters are now split up, PHP will have no problems.</p>
<pre><code>&lt;cms:concat &#39;&lt;&#39; &#39;?xml version=&quot;1.0&quot; encoding=&quot;&#39; k_site_charset &#39;&quot;?&#39; &#39;&gt;&#39; /&gt;
</code></pre><p class="notice">The <em>k_site_charset</em> variable contains the value set in <em>config.php</em> for the character set used by your web-site.</p>

<p>The second problem can be rectified by using the Couch&#39;s <a href="../tags-reference/content_type.html"><strong><em>content_type</em></strong></a> tag. This tag instructs the web server to output the desired mime-type. We&#39;ll use it to output <em>text/xml</em>.</p>
<p>The modified snippet should now look like this -</p>
<pre><code>&lt;?php require_once( &#39;couch/cms.php&#39; ); ?&gt;
&lt;cms:content_type &#39;text/xml&#39; /&gt;&lt;cms:concat &#39;&lt;&#39; &#39;?xml version=&quot;1.0&quot; encoding=&quot;&#39; k_site_charset &#39;&quot;?&#39; &#39;&gt;&#39; /&gt;
&lt;rss version=&quot;2.0&quot;&gt;
  &lt;channel&gt;
    &lt;title&gt;My Explosive News&lt;/title&gt;
    &lt;link&gt;http://www.mysite.com&lt;/link&gt;
    &lt;description&gt;News and articles written by me&lt;/description&gt;
    &lt;language&gt;en-us&lt;/language&gt;
    &lt;pubDate&gt;10 Jul 2007&lt;/pubDate&gt;

    &lt;item&gt;
        &lt;title&gt;My Second News&lt;/title&gt;
        &lt;link&gt;http://www.mysite.com/breaking/my-second-news.html&lt;/link&gt;
        &lt;description&gt;This is my second news item.&lt;/description&gt;
        &lt;pubDate&gt;10 Jul 2007&lt;/pubDate&gt;
    &lt;/item&gt;

    &lt;item&gt;
        &lt;title&gt;My First News&lt;/title&gt;
        &lt;link&gt;http://www.mysite.com/my-first-news.html&lt;/link&gt;
        &lt;description&gt;This is my first news item.&lt;/description&gt;
        &lt;pubDate&gt;10 Jul 2007&lt;/pubDate&gt;
    &lt;/item&gt;
  &lt;/channel&gt;
&lt;/rss&gt;
&lt;?php COUCH::invoke(); ?&gt;
</code></pre><p class="notice"><strong>IMP.</strong> Do not split the <a href="../tags-reference/content_type.html"><strong><em>content_type</em></strong></a> statement and the <a href="../tags-reference/concat.html"><strong><em>concat</em></strong></a> statement into separate lines. This will cause an empty line to be output before the xml declaration and will invalidate the feed.</p>

<p>We can now fetch the news items from the <em>news.php</em> template by using <a href="../tags-reference/pages.html"><strong><em>pages</em></strong></a> tag and add it to our feed to make it dynamic -</p>
<pre><code>&lt;?php require_once( &#39;couch/cms.php&#39; ); ?&gt;
&lt;cms:content_type &#39;text/xml&#39; /&gt;&lt;cms:concat &#39;&lt;&#39; &#39;?xml version=&quot;1.0&quot; encoding=&quot;&#39; k_site_charset &#39;&quot;?&#39; &#39;&gt;&#39; /&gt;
&lt;rss version=&quot;2.0&quot;&gt;
  &lt;channel&gt;
    &lt;title&gt;My News Channel&lt;/title&gt;
    &lt;link&gt;&lt;cms:show k_site_link /&gt;&lt;/link&gt;
    &lt;description&gt;Description of this channel.&lt;/description&gt;
    &lt;language&gt;en-us&lt;/language&gt;
    &lt;pubDate&gt;&lt;cms:date format=&#39;D, d M Y H:i:s&#39; gmt=&#39;1&#39;/&gt; GMT&lt;/pubDate&gt;
    &lt;generator&gt;Couch CMS&lt;/generator&gt;

    &lt;cms:pages masterpage=&#39;property.php&#39; limit=&quot;10&quot;&gt;
    &lt;item&gt;
        &lt;title&gt;&lt;cms:show k_page_title /&gt;&lt;/title&gt;
        &lt;link&gt;&lt;cms:show k_page_link /&gt;&lt;/link&gt;
        &lt;description&gt;
            &lt;cms:html_encode&gt;
                &lt;cms:excerptHTML&gt;&lt;cms:show my_news_text /&gt;&lt;/cms:excerptHTML&gt;
            &lt;/cms:html_encode&gt;
        &lt;/description&gt;

        &lt;pubDate&gt;&lt;cms:date k_page_date format=&#39;D, d M Y H:i:s&#39; gmt=&#39;1&#39;/&gt; GMT&lt;/pubDate&gt;
    &lt;/item&gt;
    &lt;/cms:pages&gt;
 &lt;/channel&gt;
&lt;/rss&gt;
&lt;?php COUCH::invoke(); ?&gt;
</code></pre><p>We are assuming that an editable field named <em>my_news_text</em> contains the news text.<br/>
The <a href="../tags-reference/excerpthtml.html"><strong><em>excerptHTML</em></strong></a> tag can be used to output only an excerpt of your page.<br/>
We need to wrap the output within <a href="../tags-reference/html_encode.html"><strong><em>html_encode</em></strong></a> to encode certain characters that are not valid in XML.</p>
<p>And that is it. Your automated RSS feed is ready.<br/>
Modify the snippet to suit your web-site&#39;s needs.</p>
</article>
        </div>
        <!-- end -->
		</div>
	</section>

    <section>&nbsp;</section>

	<footer id="footer" class="footer light-text">
		<div class="container">
			<div class="footer-content row">
				<div class="col-sm-12 social-wrap col-xs-12">
					<strong class="heading">Follow us on Twitter</strong>
					<ul class="list-inline socials">
						<li><a href="https://twitter.com/CouchCMS"><span class="icon icon-socialmedia-07"></span></a></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="copyright">&copy; 2010-2017 Webzyme Softwares Pvt. Ltd. All Rights Reserved</div>
	</footer>

	<div class="back-to-top"><i class="fa fa-angle-up fa-3x"></i></div>

	<!--[if lt IE 9]>
		<script type="text/javascript" src="../assets/js/jquery-1.11.3.min.js?ver=1"></script>
	<![endif]-->
	<!--[if (gte IE 9) | (!IE)]><!-->
		<script type="text/javascript" src="../assets/js/jquery-2.1.4.min.js?ver=1"></script>
	<!--<![endif]-->

	<script type="text/javascript" src="../assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../assets/js/startuply.js"></script>
    <script type="text/javascript" src="../assets/js/ga.js"></script>
</body>
</html>
